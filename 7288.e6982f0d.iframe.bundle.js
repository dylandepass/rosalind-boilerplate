"use strict";(self.webpackChunk_rosalind_rosalind_template=self.webpackChunk_rosalind_rosalind_template||[]).push([[7288],{"./blocks/library-config/library-config.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>init});var _scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./scripts/scripts.js");const LIBRARY_PATH="/storybook/library.json";async function loadList(type,content,list){switch(list.innerHTML="",type){case"blocks":!async function loadBlocks(content,list){const{default:blocks}=await __webpack_require__.e(7839).then(__webpack_require__.bind(__webpack_require__,"./blocks/library-config/lists/blocks.js"));blocks(content,list)}(content,list);break;case"placeholders":!async function loadPlaceholders(content,list){const{default:placeholders}=await __webpack_require__.e(3746).then(__webpack_require__.bind(__webpack_require__,"./blocks/library-config/lists/placeholders.js"));placeholders(content,list)}(content,list);break;case"assets":!async function loadAssets(content,list){const{default:assets}=await __webpack_require__.e(2293).then(__webpack_require__.bind(__webpack_require__,"./blocks/library-config/lists/assets.js"));assets(content,list)}(content,list);break;default:console.log(`Library type not supported: ${type}`)}}async function fetchLibrary(domain){const{searchParams}=new URL(window.location.href),library=searchParams.get("library")||`${domain}${LIBRARY_PATH}`,resp=await fetch(library);return resp.ok?resp.json():null}async function fetchAssetsData(path){if(!path)return null;const resp=await fetch(path);if(!resp.ok)return null;return(await resp.json()).entities.map((entity=>entity.links[0].href))}async function init(el){el.querySelector("div").remove(),function detectContext(){window.self===window.top&&document.body.classList.add("in-page")}();const base=await fetchLibrary(window.location.origin),supplied=await async function getSuppliedLibrary(){const{searchParams}=new URL(window.location.href),repo=searchParams.get("repo"),owner=searchParams.get("owner");return repo&&owner?fetchLibrary(`https://main--${repo}--${owner}.hlx.live`):null}(),libraries=await async function combineLibraries(base,supplied){const assetsPath=new URL(window.location.href).searchParams.get("assets"),library={blocks:base.blocks.data,placeholders:base.placeholders?.data,assets:await fetchAssetsData(assetsPath)};return supplied&&(supplied.blocks.data.length>0&&library.blocks.push(...supplied.blocks.data),supplied.placeholders.data.length>0&&(library.placeholders=supplied.placeholders.data)),library}(base,supplied),skLibrary=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("div",{class:"sk-library"}),header=function createHeader(){const nav=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("button",{class:"sk-library-logo"},"Franklin Library"),title=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("div",{class:"sk-library-title"},nav);title.append((0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("p",{class:"sk-library-title-text"},"Pick a library"));const header=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("div",{class:"sk-library-header"},title);return nav.addEventListener("click",(e=>{const skLibrary=e.target.closest(".sk-library");skLibrary.querySelector(".sk-library-title-text").textContent="Pick a library",skLibrary.querySelectorAll(".inset").forEach((el=>{el.classList.remove("inset")})),skLibrary.classList.remove("allow-back")})),header}();skLibrary.append(header);const list=function createList(libraries){const container=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("div",{class:"con-container"}),libraryList=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("ul",{class:"sk-library-list"});return container.append(libraryList),Object.keys(libraries).forEach((type=>{if(!libraries[type]||0===libraries[type].length)return;const item=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("li",{class:"content-type"},type);libraryList.append(item);const list=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("ul");list.classList.add("con-type-list",`con-${type}-list`),container.append(list),item.addEventListener("click",(e=>{const skLibrary=e.target.closest(".sk-library");skLibrary.querySelector(".sk-library-title-text").textContent=type,libraryList.classList.add("inset"),list.classList.add("inset"),skLibrary.classList.add("allow-back"),loadList(type,libraries[type],list)}))})),container}(libraries);skLibrary.append(list),el.attachShadow({mode:"open"}),el.shadowRoot.append(skLibrary);const link=(0,_scripts_scripts_js__WEBPACK_IMPORTED_MODULE_0__.ln)("link");link.setAttribute("rel","stylesheet"),link.setAttribute("href","/blocks/library-config/library-config.css"),el.shadowRoot.appendChild(link)}}}]);