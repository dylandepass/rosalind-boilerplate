{"version":3,"file":"performance-7525c2f0.js","sources":["../../scripts/performance.js"],"sourcesContent":["/*\n * lighthouse performance instrumentation helper\n * (needs a refactor)\n */\n\nfunction stamp(message, time = new Date() - performance.timing.navigationStart, type = '') {\n  // eslint-disable-next-line no-console\n  const colors = {\n    general: '#888',\n    cls: '#c50',\n    lcp: 'green',\n    tbt: 'red',\n    paint: '#b73',\n    franklin: '#586AE8',\n  };\n  const color = colors[type] || '#888';\n  // eslint-disable-next-line no-console\n  console.log(\n    `%c${Math.round(time).toString().padStart(5, ' ')}%c %c${type}%c ${message}`,\n    'background-color: #444; padding: 3px; border-radius: 3px;',\n    '',\n    `background-color: ${color}; padding: 3px 5px; border-radius: 3px;`,\n    '',\n  );\n}\n\nfunction registerPerformanceLogger() {\n  try {\n    const polcp = new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries();\n      entries.forEach((entry) => {\n        stamp(JSON.stringify(entry), entry.startTime, 'lcp');\n        // eslint-disable-next-line no-console\n        console.log(entry.element);\n      });\n    });\n    polcp.observe({ type: 'largest-contentful-paint', buffered: true });\n\n    const pols = new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries();\n      entries.forEach((entry) => {\n        const to = entry.sources[0].currentRect;\n        const from = entry.sources[0].previousRect;\n        stamp(`${Math.round(entry.value * 100000) / 100000}\n          from: ${from.top} ${from.right} ${from.bottom} ${from.left}\n          to:   ${to.top} ${to.right} ${to.bottom} ${to.left}`, entry.startTime, 'cls');\n        // eslint-disable-next-line no-console\n        console.log(entry.sources[0].node);\n      });\n    });\n    pols.observe({ type: 'layout-shift', buffered: true });\n\n    const polt = new PerformanceObserver((list) => {\n      list.getEntries().forEach((entry) => {\n        // Log the entry and all associated details.\n        stamp(JSON.stringify(entry), entry.startTime, 'tbt');\n      });\n    });\n\n    // Start listening for `longtask` entries to be dispatched.\n    polt.observe({ type: 'longtask', buffered: true });\n\n    const popaint = new PerformanceObserver((list) => {\n      list.getEntries().forEach((entry) => {\n        // Log the entry and all associated details.\n        stamp(JSON.stringify(entry), entry.startTime, 'paint');\n      });\n    });\n      // Start listening for `longtask` entries to be dispatched.\n    popaint.observe({ type: 'paint', buffered: true });\n\n    const pores = new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries();\n      entries.forEach((entry) => {\n        stamp(`${entry.name} loaded`, Math.round(entry.startTime + entry.duration));\n      });\n    });\n\n    pores.observe({ type: 'resource', buffered: true });\n  } catch (e) {\n    // no output\n  }\n\n  document.body.addEventListener('section-display', (e) => {\n    stamp('section displayed', new Date() - performance.timing.navigationStart, 'franklin');\n    // eslint-disable-next-line no-console\n    console.log(e.detail.section);\n  });\n}\n\nexport default function performanceLogger() {\n  stamp('helix performance logging started');\n  registerPerformanceLogger();\n}\n"],"names":["stamp","message","time","type","color","registerPerformanceLogger","entryList","entry","to","from","list","e","performanceLogger"],"mappings":"AAKA,SAASA,EAAMC,EAASC,EAAO,IAAI,KAAS,YAAY,OAAO,gBAAiBC,EAAO,GAAI,CAUzF,MAAMC,EARS,CACb,QAAS,OACT,IAAK,OACL,IAAK,QACL,IAAK,MACL,MAAO,OACP,SAAU,SACd,EACuBD,CAAI,GAAK,OAE9B,QAAQ,IACN,KAAK,KAAK,MAAMD,CAAI,EAAE,SAAQ,EAAG,SAAS,EAAG,GAAG,SAASC,OAAUF,IACnE,4DACA,GACA,qBAAqBG,2CACrB,EACJ,CACA,CAEA,SAASC,GAA4B,CACnC,GAAI,CACY,IAAI,oBAAqBC,GAAc,CACnCA,EAAU,aAClB,QAASC,GAAU,CACzBP,EAAM,KAAK,UAAUO,CAAK,EAAGA,EAAM,UAAW,KAAK,EAEnD,QAAQ,IAAIA,EAAM,OAAO,CACjC,CAAO,CACP,CAAK,EACK,QAAQ,CAAE,KAAM,2BAA4B,SAAU,EAAI,CAAE,EAErD,IAAI,oBAAqBD,GAAc,CAClCA,EAAU,aAClB,QAASC,GAAU,CACzB,MAAMC,EAAKD,EAAM,QAAQ,CAAC,EAAE,YACtBE,EAAOF,EAAM,QAAQ,CAAC,EAAE,aAC9BP,EAAM,GAAG,KAAK,MAAMO,EAAM,MAAQ,GAAM,EAAI;AAAA,kBAClCE,EAAK,OAAOA,EAAK,SAASA,EAAK,UAAUA,EAAK;AAAA,kBAC9CD,EAAG,OAAOA,EAAG,SAASA,EAAG,UAAUA,EAAG,OAAQD,EAAM,UAAW,KAAK,EAE9E,QAAQ,IAAIA,EAAM,QAAQ,CAAC,EAAE,IAAI,CACzC,CAAO,CACP,CAAK,EACI,QAAQ,CAAE,KAAM,eAAgB,SAAU,EAAI,CAAE,EAExC,IAAI,oBAAqBG,GAAS,CAC7CA,EAAK,WAAU,EAAG,QAASH,GAAU,CAEnCP,EAAM,KAAK,UAAUO,CAAK,EAAGA,EAAM,UAAW,KAAK,CAC3D,CAAO,CACP,CAAK,EAGI,QAAQ,CAAE,KAAM,WAAY,SAAU,EAAI,CAAE,EAEjC,IAAI,oBAAqBG,GAAS,CAChDA,EAAK,WAAU,EAAG,QAASH,GAAU,CAEnCP,EAAM,KAAK,UAAUO,CAAK,EAAGA,EAAM,UAAW,OAAO,CAC7D,CAAO,CACP,CAAK,EAEO,QAAQ,CAAE,KAAM,QAAS,SAAU,EAAI,CAAE,EAEnC,IAAI,oBAAqBD,GAAc,CACnCA,EAAU,aAClB,QAASC,GAAU,CACzBP,EAAM,GAAGO,EAAM,cAAe,KAAK,MAAMA,EAAM,UAAYA,EAAM,QAAQ,CAAC,CAClF,CAAO,CACP,CAAK,EAEK,QAAQ,CAAE,KAAM,WAAY,SAAU,EAAI,CAAE,CACnD,MAAC,CAED,CAED,SAAS,KAAK,iBAAiB,kBAAoBI,GAAM,CACvDX,EAAM,oBAAqB,IAAI,KAAS,YAAY,OAAO,gBAAiB,UAAU,EAEtF,QAAQ,IAAIW,EAAE,OAAO,OAAO,CAChC,CAAG,CACH,CAEe,SAASC,GAAoB,CAC1CZ,EAAM,mCAAmC,EACzCK,GACF"}