{"version":3,"file":"index-dd503cea.js","sources":["../../node_modules/@dylandepass/franklin-storybook-addon/dist/esm/template.js","../../node_modules/@dylandepass/franklin-storybook-addon/dist/esm/index.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Template = Template;\n\n/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n/**\n * Prepares and decorates the blocks to be rendered in storybook\n * @param Franklin The franklin-web-library used by the story, either an instance or the class\n * @param args The storybook args\n * @param parameters The story parameters\n * @param main The main container for the decorated content\n * @param content The content element to be decorated\n * @param decorate The decorate method for the block used in the storybook\n * @returns A fully decorated element for rendering in storybook\n */\nasync function prepare(loadPage, args, parameters, main, content, decorate) {\n  const {\n    selector,\n    index\n  } = parameters;\n  const {\n    sectionClasses,\n    blockClasses\n  } = args;\n  const section = document.createElement('div');\n  const node = content.querySelectorAll(selector).item(index) || content.querySelector(selector);\n  main.appendChild(section);\n  section.innerHTML = parameters.root ? node.parentNode.innerHTML : node.outerHTML;\n  await loadPage();\n\n  if (sectionClasses) {\n    if (Array.isArray(sectionClasses)) {\n      sectionClasses.forEach(sectionClass => section.classList.add(sectionClass));\n    } else {\n      section.classList.add(sectionClasses);\n    }\n  }\n\n  if (blockClasses) {\n    section.querySelectorAll('.block').forEach(block => {\n      if (Array.isArray(blockClasses)) {\n        blockClasses.forEach(blockClass => block.classList.add(blockClass));\n      } else {\n        block.classList.add(blockClasses);\n      }\n    });\n  }\n\n  if (decorate) {\n    decorate(parameters.autoBlock ? main.querySelector('.block') : section.querySelector(selector));\n  } // Block loader is disabled, set loaded incase site sets in override\n\n\n  main.querySelectorAll('.section[data-section-status=\"initialized\"]').forEach(section => {\n    section.setAttribute('data-section-status', 'loaded');\n  });\n  main.querySelectorAll('.block[data-block-status=\"initialized\"]').forEach(block => {\n    block.setAttribute('data-block-status', 'loaded');\n  });\n  return main;\n}\n/**\n * Prepares the blocks to be rendered in storybook \n * @param Franklin The franklin-web-library used by the story, either an instance or the class\n * @param args The storybook args\n * @param context The storybook context\n * @param decorate The decorate method of the component\n * @returns A fully decorated element for rendering in storybook\n */\n\n\nfunction Template(Franklin, args, context, decorate) {\n  const parser = new DOMParser();\n  const main = document.createElement('main');\n  const {\n    parameters\n  } = context;\n  const {\n    path,\n    host\n  } = parameters;\n\n  if (args.content && args.updated) {\n    // Wrap in promise so main in returned and overrides old version when decorator runs\n    Promise.resolve().then(async () => {\n      const element = parser.parseFromString(args.content, 'text/html');\n\n      try {\n        return prepare(Franklin, args, parameters, main, element.body, decorate);\n      } catch (err) {\n        console.error(err);\n        return err;\n      }\n    });\n  } else {\n    const url = `${host}${path}`;\n    fetch(url).then(res => {\n      res.text().then(async htmlText => {\n        const regex = new RegExp('./media', 'g');\n        htmlText = htmlText.replace(regex, `${host}/media`);\n        const element = parser.parseFromString(htmlText, 'text/html');\n        return prepare(Franklin, args, parameters, main, element.body, decorate);\n      });\n    });\n  }\n\n  return main;\n}\n\n;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"FranklinTemplate\", {\n  enumerable: true,\n  get: function () {\n    return _template.Template;\n  }\n});\nexports.default = void 0;\n\nvar _template = require(\"./template\");\n\n/*\n * Copyright 2022 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n// make it work with --isolatedModules\nvar _default = {};\nexports.default = _default;"],"names":["template","Template","prepare","loadPage","args","parameters","main","content","decorate","selector","index","sectionClasses","blockClasses","section","node","sectionClass","block","blockClass","Franklin","context","parser","path","host","element","err","url","res","htmlText","regex","exports","_template","require$$0","_default"],"mappings":"cAEA,OAAO,eAAeA,EAAS,aAAc,CAC3C,MAAO,EACT,CAAC,EACeA,EAAA,SAAGC,EAwBnB,eAAeC,EAAQC,EAAUC,EAAMC,EAAYC,EAAMC,EAASC,EAAU,CAC1E,KAAM,CACJ,SAAAC,EACA,MAAAC,CACD,EAAGL,EACE,CACJ,eAAAM,EACA,aAAAC,CACD,EAAGR,EACES,EAAU,SAAS,cAAc,KAAK,EACtCC,EAAOP,EAAQ,iBAAiBE,CAAQ,EAAE,KAAKC,CAAK,GAAKH,EAAQ,cAAcE,CAAQ,EAC7F,OAAAH,EAAK,YAAYO,CAAO,EACxBA,EAAQ,UAAYR,EAAW,KAAOS,EAAK,WAAW,UAAYA,EAAK,UACvE,MAAMX,EAAQ,EAEVQ,IACE,MAAM,QAAQA,CAAc,EAC9BA,EAAe,QAAQI,GAAgBF,EAAQ,UAAU,IAAIE,CAAY,CAAC,EAE1EF,EAAQ,UAAU,IAAIF,CAAc,GAIpCC,GACFC,EAAQ,iBAAiB,QAAQ,EAAE,QAAQG,GAAS,CAC9C,MAAM,QAAQJ,CAAY,EAC5BA,EAAa,QAAQK,GAAcD,EAAM,UAAU,IAAIC,CAAU,CAAC,EAElED,EAAM,UAAU,IAAIJ,CAAY,CAExC,CAAK,EAGCJ,GACFA,EAASH,EAAW,UAAYC,EAAK,cAAc,QAAQ,EAAIO,EAAQ,cAAcJ,CAAQ,CAAC,EAIhGH,EAAK,iBAAiB,6CAA6C,EAAE,QAAQO,GAAW,CACtFA,EAAQ,aAAa,sBAAuB,QAAQ,CACxD,CAAG,EACDP,EAAK,iBAAiB,yCAAyC,EAAE,QAAQU,GAAS,CAChFA,EAAM,aAAa,oBAAqB,QAAQ,CACpD,CAAG,EACMV,CACT,CAWA,SAASL,EAASiB,EAAUd,EAAMe,EAASX,EAAU,CACnD,MAAMY,EAAS,IAAI,UACbd,EAAO,SAAS,cAAc,MAAM,EACpC,CACJ,WAAAD,CACD,EAAGc,EACE,CACJ,KAAAE,EACA,KAAAC,CACD,EAAGjB,EAEJ,GAAID,EAAK,SAAWA,EAAK,QAEvB,QAAQ,UAAU,KAAK,SAAY,CACjC,MAAMmB,EAAUH,EAAO,gBAAgBhB,EAAK,QAAS,WAAW,EAEhE,GAAI,CACF,OAAOF,EAAQgB,EAAUd,EAAMC,EAAYC,EAAMiB,EAAQ,KAAMf,CAAQ,CACxE,OAAQgB,EAAP,CACA,eAAQ,MAAMA,CAAG,EACVA,CACR,CACP,CAAK,MACI,CACL,MAAMC,EAAM,GAAGH,IAAOD,IACtB,MAAMI,CAAG,EAAE,KAAKC,GAAO,CACrBA,EAAI,KAAI,EAAG,KAAK,MAAMC,GAAY,CAChC,MAAMC,EAAQ,IAAI,OAAO,UAAW,GAAG,EACvCD,EAAWA,EAAS,QAAQC,EAAO,GAAGN,SAAY,EAClD,MAAMC,EAAUH,EAAO,gBAAgBO,EAAU,WAAW,EAC5D,OAAOzB,EAAQgB,EAAUd,EAAMC,EAAYC,EAAMiB,EAAQ,KAAMf,CAAQ,CAC/E,CAAO,CACP,CAAK,CACF,CAED,OAAOF,CACT,cCvHA,OAAO,eAAwBuB,EAAA,aAAc,CAC3C,MAAO,EACT,CAAC,EACD,OAAO,eAAeA,EAAS,mBAAoB,CACjD,WAAY,GACZ,IAAK,UAAY,CACf,OAAOC,EAAU,QAClB,CACH,CAAC,EACDD,EAAkB,QAAA,OAElB,IAAIC,EAAYC,EAcZC,EAAW,CAAA,EACfH,EAAA,QAAkBG"}