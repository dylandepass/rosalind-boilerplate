import{c as u}from"./scripts-f7a7b8bd.js";import v from"./library-utils-7f4d8b3f.js";import"./preload-helper-41c905a7.js";import"./lib-franklin-4fe0dc03.js";function x(o){const e=o.previousElementSibling;return e&&["H2","H3"].includes(e.nodeName)?e.textContent:null}function E(o){const e=o.className.split(" "),n=e.shift();return e.length>0?`${n} (${e.join(", ")})`:n}function y(o,e,n){const h=new URL(n);o.querySelectorAll("img").forEach(t=>{const m=t.src.split("/").pop();t.src=`${h.origin}/${m}`;const{width:c,height:r}=t,d=c>200?200/c:1;t.width=c*d,t.height=r*d});const s=[...o.children],i=s.reduce((t,l)=>l.children.length>t?l.children.length:t,0),a=document.createElement("table");a.setAttribute("border",1);const p=document.createElement("tr");return p.append(u("th",{colspan:i},e)),a.append(p),s.forEach(t=>{const l=document.createElement("tr");[...t.children].forEach(m=>{const c=document.createElement("td");t.children.length<i&&c.setAttribute("colspan",i),c.innerHTML=m.innerHTML,l.append(c)}),a.append(l)}),a.outerHTML}async function H(o,e){o.forEach(async n=>{const h=u("p",{class:"item-title"},n.name),s=u("li",{class:"block-group"},h),i=u("button",{class:"preview-group"},"Preview");s.append(i),e.append(s);const a=u("ul",{class:"block-group-list"});e.append(a),s.addEventListener("click",()=>{s.classList.toggle("is-open")}),i.addEventListener("click",r=>{r.stopPropagation(),window.open(n.path,"_blockpreview")});const p=await fetch(`${n.path}.plain.html`);if(!p.ok)return;const t=await p.text();new DOMParser().parseFromString(t,"text/html").body.querySelectorAll("div[class]").forEach(r=>{const d=document.createElement("li"),f=document.createElement("p");f.textContent=x(r)||E(r);const g=document.createElement("button");g.addEventListener("click",b=>{const w=y(r,E(r),n.path);b.target.classList.add("copied"),setTimeout(()=>{b.target.classList.remove("copied")},3e3);const L=new Blob([w],{type:"text/html"});v(L)}),d.append(f,g),a.append(d)})})}export{H as default};
//# sourceMappingURL=blocks-7b2672e3.js.map
