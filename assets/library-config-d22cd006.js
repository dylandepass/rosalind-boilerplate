import{_ as l}from"./preload-helper-41c905a7.js";import{c as n}from"./scripts-f7a7b8bd.js";import"./lib-franklin-4fe0dc03.js";const u="/storybook/library.json";async function b(t,s){const{default:e}=await l(()=>import("./blocks-7b2672e3.js"),["./blocks-7b2672e3.js","./scripts-f7a7b8bd.js","./preload-helper-41c905a7.js","./lib-franklin-4fe0dc03.js","./library-utils-7f4d8b3f.js"],import.meta.url);e(t,s)}async function f(t,s){const{default:e}=await l(()=>import("./placeholders-7c307f99.js"),["./placeholders-7c307f99.js","./scripts-f7a7b8bd.js","./preload-helper-41c905a7.js","./lib-franklin-4fe0dc03.js","./library-utils-7f4d8b3f.js"],import.meta.url);e(t,s)}async function p(t,s){const{default:e}=await l(()=>import("./assets-0f13cb34.js"),["./assets-0f13cb34.js","./library-utils-7f4d8b3f.js","./scripts-f7a7b8bd.js","./preload-helper-41c905a7.js","./lib-franklin-4fe0dc03.js"],import.meta.url);e(t,s)}async function y(t,s,e){switch(e.innerHTML="",t){case"blocks":b(s,e);break;case"placeholders":f(s,e);break;case"assets":p(s,e);break;default:console.log(`Library type not supported: ${t}`)}}async function d(t){const{searchParams:s}=new URL(window.location.href),r=s.get("library")||`${t}${u}`,a=await fetch(r);return a.ok?a.json():null}async function k(){const{searchParams:t}=new URL(window.location.href),s=t.get("repo"),e=t.get("owner");return!s||!e?null:d(`https://main--${s}--${e}.hlx.live`)}async function h(t){if(!t)return null;const s=await fetch(t);return s.ok?(await s.json()).entities.map(a=>a.links[0].href):null}async function w(t,s){const r=new URL(window.location.href).searchParams.get("assets"),a={blocks:t.blocks.data,placeholders:t.placeholders?.data,assets:await h(r)};return s&&(s.blocks.data.length>0&&a.blocks.push(...s.blocks.data),s.placeholders.data.length>0&&(a.placeholders=s.placeholders.data)),a}function m(t){const s=n("div",{class:"con-container"}),e=n("ul",{class:"sk-library-list"});return s.append(e),Object.keys(t).forEach(r=>{if(!t[r]||t[r].length===0)return;const a=n("li",{class:"content-type"},r);e.append(a);const o=document.createElement("ul");o.classList.add("con-type-list",`con-${r}-list`),s.append(o),a.addEventListener("click",i=>{const c=i.target.closest(".sk-library");c.querySelector(".sk-library-title-text").textContent=r,e.classList.add("inset"),o.classList.add("inset"),c.classList.add("allow-back"),y(r,t[r],o)})}),s}function L(){const t=n("button",{class:"sk-library-logo"},"Franklin Library"),s=n("div",{class:"sk-library-title"},t);s.append(n("p",{class:"sk-library-title-text"},"Pick a library"));const e=n("div",{class:"sk-library-header"},s);return t.addEventListener("click",r=>{const a=r.target.closest(".sk-library");a.querySelector(".sk-library-title-text").textContent="Pick a library",a.querySelectorAll(".inset").forEach(i=>{i.classList.remove("inset")}),a.classList.remove("allow-back")}),e}function _(){window.self===window.top&&document.body.classList.add("in-page")}async function P(t){t.querySelector("div").remove(),_();const s=await d(window.location.origin),e=await k(),r=await w(s,e),a=n("div",{class:"sk-library"}),o=L();a.append(o);const i=m(r);a.append(i),t.attachShadow({mode:"open"}),t.shadowRoot.append(a);const c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("href","/blocks/library-config/library-config.css"),t.shadowRoot.appendChild(c)}export{P as default};
//# sourceMappingURL=library-config-d22cd006.js.map
