import{_ as i}from"./preload-helper-41c905a7.js";import{c as n}from"./scripts-00f39e75.js";import"./lib-franklin-934bff3c.js";const u="/storybook/library.json";async function b(s,t){const{default:a}=await i(()=>import("./blocks-72ca5249.js"),["./blocks-72ca5249.js","./scripts-00f39e75.js","./preload-helper-41c905a7.js","./lib-franklin-934bff3c.js","./library-utils-7f4d8b3f.js"],import.meta.url);a(s,t)}async function f(s,t){const{default:a}=await i(()=>import("./placeholders-f03d4760.js"),["./placeholders-f03d4760.js","./scripts-00f39e75.js","./preload-helper-41c905a7.js","./lib-franklin-934bff3c.js","./library-utils-7f4d8b3f.js"],import.meta.url);a(s,t)}async function p(s,t){const{default:a}=await i(()=>import("./assets-b456c49e.js"),["./assets-b456c49e.js","./library-utils-7f4d8b3f.js","./scripts-00f39e75.js","./preload-helper-41c905a7.js","./lib-franklin-934bff3c.js"],import.meta.url);a(s,t)}async function y(s,t,a){switch(a.innerHTML="",s){case"blocks":b(t,a);break;case"placeholders":f(t,a);break;case"assets":p(t,a);break;default:console.log(`Library type not supported: ${s}`)}}async function d(s){const{searchParams:t}=new URL(window.location.href),r=t.get("library")||`${s}${u}`,e=await fetch(r);return e.ok?e.json():null}async function k(){const{searchParams:s}=new URL(window.location.href),t=s.get("repo"),a=s.get("owner");return!t||!a?null:d(`https://main--${t}--${a}.hlx.live`)}async function h(s){if(!s)return null;const t=await fetch(s);return t.ok?(await t.json()).entities.map(e=>e.links[0].href):null}async function w(s,t){const r=new URL(window.location.href).searchParams.get("assets"),e={blocks:s.blocks.data,placeholders:s.placeholders?.data,assets:await h(r)};return t&&(t.blocks.data.length>0&&e.blocks.push(...t.blocks.data),t.placeholders.data.length>0&&(e.placeholders=t.placeholders.data)),e}function L(s){const t=n("div",{class:"con-container"}),a=n("ul",{class:"sk-library-list"});return t.append(a),Object.keys(s).forEach(r=>{if(!s[r]||s[r].length===0)return;const e=n("li",{class:"content-type"},r);a.append(e);const o=document.createElement("ul");o.classList.add("con-type-list",`con-${r}-list`),t.append(o),e.addEventListener("click",c=>{const l=c.target.closest(".sk-library");l.querySelector(".sk-library-title-text").textContent=r,a.classList.add("inset"),o.classList.add("inset"),l.classList.add("allow-back"),y(r,s[r],o)})}),t}function m(){const s=n("button",{class:"sk-library-logo"},"Franklin Library"),t=n("div",{class:"sk-library-title"},s);t.append(n("p",{class:"sk-library-title-text"},"Pick a library"));const a=n("div",{class:"sk-library-header"},t);return s.addEventListener("click",r=>{const e=r.target.closest(".sk-library");e.querySelector(".sk-library-title-text").textContent="Pick a library",e.querySelectorAll(".inset").forEach(c=>{c.classList.remove("inset")}),e.classList.remove("allow-back")}),a}function _(){window.self===window.top&&document.body.classList.add("in-page")}async function P(s){s.querySelector("div").remove(),_();const t=await d(window.location.origin),a=await k(),r=await w(t,a),e=n("div",{class:"sk-library"}),o=m();e.append(o);const c=L(r);e.append(c),s.append(e)}export{P as default};
//# sourceMappingURL=library-config-a7af0a74.js.map
